{"version":3,"sources":["utils/string.ts","utils/dateFormatters.ts","hooks/usePrevious.tsx","components/form/Selector.tsx","components/form/DynamicSelector.tsx","logo.svg","components/form/RichTextEditor.tsx","components/form/TextInput.tsx","components/animal/create-update/DetailsStep.tsx","components/animal/create-update/AnimalForm.tsx","pages/AnimalEditPage.tsx"],"names":["capitalizeFirstLetter","value","charAt","toUpperCase","slice","getYMDDateFromTS","timestamp","date","Date","parseInt","format","locale","ltLocale","getDateYMDFlexible","datestr","result","parse","isValid","usePrevious","ref","useRef","useEffect","current","Selector","options","name","defaultValue","disabled","optionsLimit","label","required","multiple","useFormContext","control","errors","formState","limitOptions","opts","state","createFilterOptions","rules","render","props","Autocomplete","field","filterOptions","getOptionLabel","option","onChange","_","renderInput","params","TextField","variant","color","margin","error","helperText","message","DynamicSelector","gqlOptions","data","useQuery","query","variables","skip","type","hasCommandModifier","KeyBindingUtil","RichTextEditor","register","setValue","fieldValue","useWatch","markup","contentHTML","convertFromHTML","contentState","ContentState","createFromBlockArray","contentBlocks","entityMap","setEditorState","EditorState","createWithContent","content","rawContentState","convertToRaw","getCurrentContent","draftToHtml","React","useState","createEmpty","editorState","editor","Box","border","borderColor","borderRadius","Toolbar","onToggle","blockType","RichUtils","toggleBlockType","Divider","inlineStyle","toggleInlineStyle","pl","m","stripPastedStyles","customStyleMap","styleMap","handleKeyCommand","command","es","newState","keyBindingFn","e","keyCode","getDefaultKeyBinding","spellCheck","placeholder","FormHelperText","id","BLOCK_TYPES","style","icon","BlockStyleControls","selection","getSelection","getBlockForKey","getStartKey","getType","className","ToggleButtonGroup","exclusive","map","ToggleButton","onMouseDown","preventDefault","handleMouseDown","INLINE_STYLES","InlineStyleControls","currentStyle","getCurrentInlineStyle","StyledTypography","styled","Typography","position","right","bottom","theme","palette","main","TextInput","fullWidth","rightHelperText","showLettersCount","maxLength","validate","InputLabelProps","undefined","localValue","setLocalValue","setError","formValue","includes","split","obj","property","callback","target","handleChange","clsx","length","GET_SPECIES","GET_GENDERS","GET_BREEDS","GET_COLORS","PREFIX","classes","relative","StyledGrid","Grid","width","DetailsStep","navigate","useNavigate","species","prevSpecies","speciesHasChangedInUi","container","spacing","item","xs","justifyContent","sm","language","toString","speciesId","input","sx","my","Button","onClick","memo","AnimalForm","animal","submitCallback","methods","useForm","defaultValues","getDefaultFormValues","handleSubmit","reset","formRef","dispatch","useAppDispatch","onSubmit","formData","a","comments","details","birthDate","createOrUpdateAnimal","resultAction","fulfilled","match","payload","display","maxWidth","now","GET_ANIMAL_DETAILS_ON_EDIT","image","imageWrapper","fill","primary","dark","padding","marginBottom","height","backgroundColor","secondary","light","breakpoints","up","TopSection","alignItems","src","logo","alt","AnimalEditPage","useParams","Number","loading","Page","topSection","Skeleton","animation","err","console"],"mappings":"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","file":"static/js/11.72d4047a.chunk.js","sourcesContent":["export const capitalizeFirstLetter = (value: string): string => value.charAt(0).toUpperCase() + value.slice(1);\n","import { format, getTime, isValid, parse } from 'date-fns';\nimport ltLocale from 'date-fns/locale/lt';\n\nexport const getYMDDateFromTS = (timestamp: string | null = ''): string => {\n    if (timestamp) {\n        const date: Date = new Date(parseInt(timestamp, 10));\n        return format(date, 'yyyy-MM-dd', { locale: ltLocale });\n    }\n\n    return '';\n};\n\nexport const getTSDateFromYMD = (datestr: string | null = ''): string => {\n    if (datestr) {\n        const result = parse(datestr, 'yyyy-MM-dd', new Date());\n        return isValid(result) ? getTime(result).toString() : '';\n    }\n\n    return '';\n};\n\nexport const getTSDateFromYMDFlexible = (datestr: string | null = ''): string => {\n    if (datestr) {\n        const result = getDateYMDFlexible(datestr);\n        if (result === false) {\n            return '';\n        }\n        // incoming datestr is still a string, but adjusted/transformed to a valid date\n        const dateResult = Date.parse(datestr);\n        return getTime(dateResult).toString();\n    }\n\n    return '';\n};\n\nexport const getDateYMDFlexible = (datestr: string | null = ''): string | boolean => {\n    if (datestr) {\n        let result = parse(datestr, 'yyyy-MM-dd', new Date());\n        if (isValid(result)) {\n            return format(result, 'yyyy-MM-dd');\n        }\n        result = parse(datestr, 'yyyy-MM', new Date());\n        if (isValid(result)) {\n            return format(result, 'yyyy-MM-dd');\n        }\n        result = parse(datestr, 'yyyy', new Date());\n        if (isValid(result)) {\n            return format(result, 'yyyy-MM-dd');\n        }\n    }\n    return false;\n};\n","import { useEffect, useRef } from 'react';\n\nexport default function usePrevious<T>(value: T): T | undefined {\n    const ref = useRef<T>();\n    useEffect(() => {\n        ref.current = value;\n    });\n    return ref.current;\n}\n","import React from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { Autocomplete, createFilterOptions, TextField } from '@mui/material';\nimport { capitalizeFirstLetter } from '../../utils/string';\n\nconst OPTIONS_LIMIT = 100;\n\nexport default function Selector({\n    options,\n    name,\n    defaultValue,\n    disabled,\n    optionsLimit = OPTIONS_LIMIT,\n    label,\n    required = false,\n    multiple = false,\n}: SelectorProps) {\n    const {\n        control,\n        formState: { errors },\n    } = useFormContext();\n\n    const limitOptions = (opts, state) =>\n        createFilterOptions<DynamicSelectorOption | string>()(opts, state).slice(0, optionsLimit);\n\n    return (\n        <Controller\n            defaultValue={defaultValue ?? null}\n            rules={{ required: required ? 'Required' : false }}\n            render={props => (\n                <Autocomplete<DynamicSelectorOption | string, boolean>\n                    {...props}\n                    value={props.field.value ?? null}\n                    options={options ?? []}\n                    filterOptions={limitOptions}\n                    getOptionLabel={option => (typeof option === 'string' ? option : option.value)}\n                    // getOptionSelected={(option, value) =>\n                    //     typeof option === 'string'\n                    //         ? option === value\n                    //         : (option as DynamicSelectorOption)?.id === (value as DynamicSelectorOption)?.id\n                    // }\n                    onChange={(_, option) => {\n                        props.field.onChange(option);\n                    }}\n                    disabled={disabled}\n                    multiple={multiple}\n                    renderInput={params => (\n                        <TextField\n                            {...params}\n                            variant=\"outlined\"\n                            color=\"primary\"\n                            margin=\"dense\"\n                            error={!!errors[name]}\n                            label={label ?? capitalizeFirstLetter(name)}\n                            helperText={errors[name]?.message ?? required ? 'Required' : 'Optional'}\n                        />\n                    )}\n                />\n            )}\n            name={name}\n            control={control}\n        />\n    );\n}\n\nexport interface SelectorProps {\n    options?: string[] | DynamicSelectorOption[];\n    name: string;\n    disabled?: boolean;\n    defaultValue?: string | undefined;\n    optionsLimit?: number;\n    label?: string;\n    helperText?: string;\n    required?: boolean;\n    multiple?: boolean;\n}\n\nexport interface DynamicSelectorOption {\n    id: string;\n    value: string;\n}\n","import { DocumentNode } from 'graphql';\nimport React from 'react';\n\nimport { useQuery } from '@apollo/client';\nimport Selector, { DynamicSelectorOption, SelectorProps } from './Selector';\n\nexport default function DynamicSelector({\n    gqlOptions,\n    name,\n    defaultValue,\n    multiple,\n    disabled,\n    helperText,\n    required,\n    label,\n}: DynamicSelectorProps) {\n    const { data } = useQuery<GqlResponse>(gqlOptions.query, {\n        variables: gqlOptions.variables,\n        skip: disabled,\n    });\n\n    return (\n        <Selector\n            options={data ? data[gqlOptions.type] : []}\n            name={name}\n            helperText={helperText}\n            defaultValue={defaultValue}\n            multiple={multiple}\n            disabled={disabled}\n            required={required}\n            label={label}\n        />\n    );\n}\n\nexport interface DynamicSelectorProps extends SelectorProps {\n    gqlOptions: { query: DocumentNode; variables?: Record<string, any>; type: string };\n}\n\ninterface GqlResponse {\n    options: DynamicSelectorOption[];\n}\n","export default __webpack_public_path__ + \"static/media/logo.22754045.svg\";","import 'draft-js/dist/Draft.css';\nimport {\n    ContentState,\n    convertFromHTML,\n    convertToRaw,\n    Editor,\n    EditorState,\n    getDefaultKeyBinding,\n    KeyBindingUtil,\n    RichUtils,\n} from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport React, { useEffect } from 'react';\nimport { useFormContext, useWatch } from 'react-hook-form';\n\nimport FormatBoldIcon from '@mui/icons-material/FormatBold';\nimport FormatItalicIcon from '@mui/icons-material/FormatItalic';\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport FormatListNumberedIcon from '@mui/icons-material/FormatListNumbered';\nimport FormatUnderlinedIcon from '@mui/icons-material/FormatUnderlined';\nimport { Box, Divider, FormHelperText, ToggleButton, ToggleButtonGroup, Toolbar } from '@mui/material';\n\nconst { hasCommandModifier } = KeyBindingUtil;\n\n// const styles = ['BOLD', 'ITALIC', 'UNDERLINE', 'STRIKETHROUGH', 'CODE'];\n// const removeInlineStyles = editorState => {\n//     const contentState = editorState.getCurrentContent();\n//     const contentWithoutStyles = styles.reduce(\n//         (acc, style) => Modifier.removeInlineStyle(acc, editorState.getSelection(), style),\n//         contentState\n//     );\n//     return EditorState.push(editorState, contentWithoutStyles, 'change-inline-style');\n// };\n//\n// const removeEntities = editorState => {\n//     const contentState = editorState.getCurrentContent();\n//     const contentWithoutEntities = Modifier.applyEntity(contentState, editorState.getSelection(), null);\n//     return EditorState.push(editorState, contentWithoutEntities, 'apply-entity');\n// };\n//\n// const removeLists = editorState => {\n//     const contentState = editorState.getCurrentContent();\n//     let contentWithoutLists = contentState;\n//     const newEditorState = editorState;\n//     const blocksMap = contentState.getBlockMap();\n//\n//     blocksMap.forEach(block => {\n//         const blockType = block.getType();\n//         if (blockType === 'ordered-list-item' || blockType === 'unordered-list-item') {\n//             const selectionState = SelectionState.createEmpty(block.getKey());\n//             const updatedSelection = selectionState.merge({\n//                 focusOffset: 0,\n//                 anchorOffset: block.getText().length,\n//             });\n//\n//             contentWithoutLists = Modifier.setBlockType(contentWithoutLists, updatedSelection, 'unstyled');\n//         }\n//     });\n//\n//     return EditorState.push(newEditorState, contentWithoutLists, 'change-block-type');\n// };\n\nexport default function RichTextEditor({ name }: RichTextEditorProps) {\n    const { register, control, setValue } = useFormContext();\n    const fieldValue = useWatch({\n        control,\n        name: name,\n    });\n\n    useEffect(() => {\n        register(name);\n        const markup = typeof fieldValue === 'string' ? fieldValue : '';\n        const contentHTML = convertFromHTML(markup);\n        const contentState = ContentState.createFromBlockArray(contentHTML.contentBlocks, contentHTML.entityMap);\n        setEditorState(EditorState.createWithContent(contentState));\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [register, name]);\n\n    const onChange = content => {\n        const rawContentState = convertToRaw(content.getCurrentContent());\n\n        const markup = draftToHtml(rawContentState);\n        setValue(name, markup);\n\n        // console.log('onChange', markup, rawContentState);\n        // console.log(,convertToRaw(content));\n        setEditorState(content);\n    };\n\n    // const blocksFromHTML = convertFromHTML(typeof fieldValue === 'string' ? fieldValue : '');\n    // const state = ContentState.createFromBlockArray(blocksFromHTML.contentBlocks, blocksFromHTML.entityMap);\n\n    // const [editorState, setEditorState] = React.useState(() => EditorState.createWithContent(state));\n    const [editorState, setEditorState] = React.useState(() => EditorState.createEmpty());\n    const editor = React.useRef(null);\n\n    const toggleBlockType = blockType => {\n        onChange(RichUtils.toggleBlockType(editorState, blockType));\n    };\n\n    const toggleInlineStyle = inlineStyle => {\n        onChange(RichUtils.toggleInlineStyle(editorState, inlineStyle));\n    };\n\n    const myKeyBindingFn = (e): string | null => {\n        if (e.keyCode === 9 /* `TAB` key */ && hasCommandModifier(e)) {\n            return 'myeditor-tab';\n        }\n        return getDefaultKeyBinding(e);\n    };\n\n    const handleKeyCommand = (command, es) => {\n        if (command === 'myeditor-tab') {\n            return 'handled';\n        }\n\n        const newState = RichUtils.handleKeyCommand(es, command);\n        if (newState) {\n            onChange(newState);\n            return 'handled';\n        }\n\n        return 'not-handled';\n    };\n    // const handleClearClick = e => {\n    //     e.stopPropagation();\n    //\n    //     const newEditorState = [removeEntities, removeInlineStyles, removeLists].reduce(\n    //         (accumulator, currentValue) => currentValue(accumulator),\n    //         editorState\n    //     );\n    //\n    //     onChange(newEditorState);\n    // };\n\n    return (\n        <Box border={1} borderColor=\"grey.500\" borderRadius={2}>\n            <Toolbar>\n                <BlockStyleControls editorState={editorState} onToggle={toggleBlockType} />\n                <Divider variant=\"middle\" />\n                <InlineStyleControls editorState={editorState} onToggle={toggleInlineStyle} />\n                {/*<ToggleButton value={'clear'} onMouseDown={e => handleClearClick(e)}>*/}\n                {/*    clear*/}\n                {/*</ToggleButton>*/}\n            </Toolbar>\n            <Box pl={1} m={2}>\n                <Editor\n                    stripPastedStyles={true}\n                    ref={editor}\n                    customStyleMap={styleMap}\n                    editorState={editorState}\n                    handleKeyCommand={handleKeyCommand}\n                    onChange={onChange}\n                    keyBindingFn={myKeyBindingFn}\n                    spellCheck={true}\n                    placeholder=\"Type here your description\"\n                />\n                <FormHelperText id=\"component-helper-text\">Optional</FormHelperText>\n            </Box>\n        </Box>\n    );\n}\n\nconst BLOCK_TYPES = [\n    // { label: 'H1', style: 'header-one', icon: <LooksOneIcon /> },\n    // { label: 'H2', style: 'header-two', icon: <LooksTwoIcon /> },\n    // { label: 'H3', style: 'header-three', icon: <Looks3Icon /> },\n    // { label: 'H4', style: 'header-four', icon: <Looks4Icon /> },\n    // { label: 'H5', style: 'header-five', icon: <Looks5Icon /> },\n    // { label: 'H6', style: 'header-six', icon: <Looks6Icon /> },\n    // { label: 'Blockquote', style: 'blockquote', icon: <FormatQuoteIcon /> },\n    { label: 'UL', style: 'unordered-list-item', icon: <FormatListBulletedIcon /> },\n    { label: 'OL', style: 'ordered-list-item', icon: <FormatListNumberedIcon /> },\n];\n\nconst BlockStyleControls = props => {\n    const { editorState } = props;\n    const selection = editorState.getSelection();\n    const blockType = editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType();\n\n    const handleMouseDown = (e, style) => {\n        e.preventDefault();\n        props.onToggle(style);\n    };\n\n    return (\n        <div className=\"RichEditor-controls\">\n            <ToggleButtonGroup value={blockType} exclusive>\n                {BLOCK_TYPES.map(type => (\n                    <ToggleButton key={type.label} value={type.style} onMouseDown={e => handleMouseDown(e, type.style)}>\n                        {type.icon}\n                    </ToggleButton>\n                    // <StyleButton\n                    //     key={type.label}\n                    //     active={type.style === blockType}\n                    //     label={type.label}\n                    //     onToggle={props.onToggle}\n                    //     style={type.style}\n                    //     icon={type.icon}\n                    // />\n                ))}\n            </ToggleButtonGroup>\n        </div>\n    );\n};\n\n// Custom overrides for \"code\" style.\nconst styleMap = {\n    // CODE: {\n    //     backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    //     fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n    //     fontSize: 16,\n    //     padding: 2,\n    // },\n};\n\nconst INLINE_STYLES = [\n    { label: 'Bold', style: 'BOLD', icon: <FormatBoldIcon /> },\n    { label: 'Italic', style: 'ITALIC', icon: <FormatItalicIcon /> },\n    { label: 'Underline', style: 'UNDERLINE', icon: <FormatUnderlinedIcon /> },\n    // { label: 'Strikethrough', style: 'STRIKETHROUGH', icon: <StrikethroughSIcon /> },\n    // { label: 'Monospace', style: 'CODE', icon: <CodeIcon /> },\n];\n\nconst InlineStyleControls = props => {\n    const currentStyle = props.editorState.getCurrentInlineStyle();\n\n    const handleMouseDown = (e, style) => {\n        e.preventDefault();\n        props.onToggle(style);\n    };\n\n    return (\n        <ToggleButtonGroup value={[...currentStyle]}>\n            {INLINE_STYLES.map(type => (\n                <ToggleButton key={type.label} value={type.style} onMouseDown={e => handleMouseDown(e, type.style)}>\n                    {type.icon}\n                </ToggleButton>\n            ))}\n        </ToggleButtonGroup>\n    );\n};\n\ninterface RichTextEditorProps {\n    name: string;\n    maxLength: number;\n}\n","import clsx from 'clsx';\nimport React, { useEffect, useState } from 'react';\nimport { Controller, FieldError, useFormContext, useWatch } from 'react-hook-form';\n\nimport { BaseTextFieldProps, styled, TextField, Typography } from '@mui/material';\n\nconst StyledTypography = styled(Typography)(({ theme }) => ({\n    position: 'absolute',\n    right: 12,\n    bottom: 12,\n    '&.Mui-error': {\n        color: theme.palette.error.main,\n    },\n}));\n\nexport default function TextInput({\n    label,\n    id,\n    name,\n    placeholder,\n    defaultValue,\n    fullWidth = false,\n    helperText,\n    rightHelperText,\n    showLettersCount = false,\n    maxLength = 25,\n    required = false,\n    validate,\n    type = 'text',\n    InputLabelProps,\n}: TextInputProps) {\n    const { control, formState } = useFormContext();\n\n    const [localValue, setLocalValue] = useState<string | undefined>(undefined);\n    const [error, setError] = useState<FieldError | undefined>(undefined);\n\n    const formValue = useWatch({\n        control,\n        name,\n        defaultValue: undefined,\n    });\n\n    useEffect(() => {\n        setLocalValue(formValue);\n    }, [formValue]);\n\n    useEffect(() => {\n        const { errors } = formState;\n        if (!name.includes('.')) {\n            setError(errors[name]);\n            return;\n        }\n\n        const [obj, property] = name.split('.');\n        setError(errors[obj] ? errors[obj][property] : undefined);\n    }, [formState, name]);\n\n    const handleChange = (e, callback) => {\n        const { value } = e.target;\n        setLocalValue(value);\n        callback(e);\n    };\n\n    return (\n        <>\n            <Controller\n                name={name}\n                control={control}\n                defaultValue={defaultValue}\n                rules={{ required: required ? 'Required' : false, maxLength, validate }}\n                render={({ field: { onChange, value } }) => (\n                    <TextField\n                        label={label}\n                        id={id}\n                        type={type}\n                        color=\"primary\"\n                        placeholder={placeholder}\n                        variant=\"outlined\"\n                        fullWidth={fullWidth}\n                        margin=\"dense\"\n                        name={name}\n                        error={!!error}\n                        helperText={error?.message || helperText}\n                        InputLabelProps={InputLabelProps}\n                        value={value}\n                        onChange={e => {\n                            handleChange(e, onChange);\n                        }}\n                        defaultValue={defaultValue}\n                    />\n                )}\n            />\n            {(showLettersCount || rightHelperText) && (\n                <StyledTypography variant=\"caption\" color=\"textSecondary\" className={clsx({ ['Mui-error']: error })}>\n                    {rightHelperText ?? `${localValue?.length || 0}/${maxLength}`}\n                </StyledTypography>\n            )}\n        </>\n    );\n}\n\ninterface TextInputProps extends BaseTextFieldProps {\n    name: string;\n    showLettersCount?: boolean;\n    maxLength?: number;\n    rightHelperText?: string;\n    required?: boolean;\n    validate?: (input: string) => string | boolean;\n}\n","import { loader } from 'graphql.macro';\nimport React, { memo, useEffect } from 'react';\nimport { useFormContext, useWatch } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom';\n\nimport { Button, Divider, Grid, styled, Typography } from '@mui/material';\nimport { Species } from '../../../graphql/types';\nimport usePrevious from '../../../hooks/usePrevious';\nimport { getDateYMDFlexible } from '../../../utils/dateFormatters';\nimport DynamicSelector from '../../form/DynamicSelector';\nimport RichTextEditor from '../../form/RichTextEditor';\nimport TextInput from '../../form/TextInput';\n\nconst GET_SPECIES = loader('../../../graphql/queries/species.graphql');\nconst GET_GENDERS = loader('../../../graphql/queries/genders.graphql');\nconst GET_BREEDS = loader('../../../graphql/queries/breeds.graphql');\nconst GET_COLORS = loader('../../../graphql/queries/colors.graphql');\n\nconst EMPTY_NAME = 'New Animal';\n\nconst PREFIX = 'DetailsStep';\n\nconst classes = {\n    relative: `${PREFIX}-relative`,\n    fullWidth: `${PREFIX}-fullWidth`,\n};\n\nconst StyledGrid = styled(Grid)(() => ({\n    relative: {\n        position: 'relative',\n    },\n    fullWidth: {\n        width: '100%',\n    },\n}));\n\nfunction DetailsStep() {\n    const { control, setValue } = useFormContext();\n    const navigate = useNavigate();\n\n    const name = useWatch({\n        control,\n        name: 'name',\n    });\n\n    const species = useWatch({\n        control,\n        name: 'details.species',\n        defaultValue: null,\n    });\n\n    const prevSpecies = usePrevious({ species });\n\n    useEffect(() => {\n        const speciesHasChangedInUi =\n            prevSpecies !== undefined && prevSpecies.species !== null && prevSpecies.species !== species;\n        if (!species || speciesHasChangedInUi) {\n            setValue('details.breed', null);\n            setValue('details.color', null);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [species, setValue]);\n\n    const handleCancel = () => {\n        navigate('/animal-list');\n    };\n\n    const dateInputValidation = (input: string) => {\n        return false !== getDateYMDFlexible(input);\n    };\n\n    return (\n        <StyledGrid container spacing={2}>\n            <Grid item xs={12} container justifyContent=\"center\">\n                <Grid item spacing={2}>\n                    {!!name ? (\n                        <Typography variant=\"h5\">{name}</Typography>\n                    ) : (\n                        <Typography variant=\"h5\">{EMPTY_NAME}</Typography>\n                    )}\n                </Grid>\n            </Grid>\n            <Grid item xs={12} container justifyContent=\"center\">\n                <Grid item xs={12} sm={6} className={classes.relative} spacing={2}>\n                    <TextInput name=\"name\" label=\"Name\" required helperText=\" \" fullWidth showLettersCount />\n                </Grid>\n            </Grid>\n            <Grid item xs={12} container spacing={2}>\n                <Grid item xs={12} sm={6}>\n                    <DynamicSelector\n                        name=\"details.species\"\n                        label=\"Specie\"\n                        gqlOptions={{ query: GET_SPECIES, variables: { language: 'lt' }, type: 'species' }}\n                    />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <DynamicSelector\n                        name=\"details.gender\"\n                        label=\"Gender\"\n                        gqlOptions={{ query: GET_GENDERS, variables: { language: 'lt' }, type: 'genders' }}\n                    />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <DynamicSelector\n                        name=\"details.breed\"\n                        label=\"Breed\"\n                        disabled={!species}\n                        gqlOptions={{\n                            query: GET_BREEDS,\n                            variables: { species: (species as Species | undefined)?.id.toString(), language: 'lt' },\n                            type: 'breeds',\n                        }}\n                    />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <DynamicSelector\n                        name=\"details.color\"\n                        label=\"Color\"\n                        gqlOptions={{\n                            query: GET_COLORS,\n                            variables: { language: 'lt', speciesId: (species as Species | undefined)?.id },\n                            type: 'colors',\n                        }}\n                    />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <TextInput\n                        name=\"details.birthDate\"\n                        id=\"birthDate\"\n                        label=\"Birth date\"\n                        placeholder=\"yyyy-mm-dd, yyyy-mm or yyyy\"\n                        helperText=\"Format date as a yyyy(-mm(-dd))\"\n                        validate={dateInputValidation}\n                        fullWidth\n                    />\n                </Grid>\n                <Grid item xs={12} className={classes.relative}>\n                    <RichTextEditor name=\"comments\" maxLength={200} />\n                </Grid>\n            </Grid>\n            <Grid item container>\n                <Divider sx={{ width: '100%', my: 3 }} />\n            </Grid>\n            <Grid item xs={12} container spacing={2} justifyContent=\"center\">\n                <Grid item>\n                    <Button color=\"primary\" variant=\"outlined\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                </Grid>\n                <Grid item>\n                    <Button type=\"submit\" color=\"primary\" variant=\"contained\">\n                        Submit\n                    </Button>\n                </Grid>\n            </Grid>\n        </StyledGrid>\n    );\n}\n\nexport default memo(DetailsStep);\n","import React, { useEffect, useRef } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { Box, Grid, GridProps } from '@mui/material';\nimport { Animal, AnimalDetails } from '../../../graphql/types';\nimport { useAppDispatch } from '../../../store';\nimport { createOrUpdateAnimal } from '../../../store/animals';\nimport { getDateYMDFlexible, getYMDDateFromTS } from '../../../utils/dateFormatters';\nimport DetailsStep from './DetailsStep';\n\nexport default function AnimalForm({ animal, submitCallback }: AnimalFormProps) {\n    const methods = useForm({ defaultValues: getDefaultFormValues(animal) });\n    const { handleSubmit, reset } = methods;\n    const formRef = useRef<HTMLFormElement>(null);\n    const dispatch = useAppDispatch();\n\n    useEffect(() => {\n        if (animal) {\n            reset(getDefaultFormValues(animal));\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [animal]);\n\n    const onSubmit = async (formData: AnimalFormData) => {\n        // filter/cleanup RichTextEditorField\n        if (formData.comments === '<p><br></p>') {\n            formData.comments = '';\n        }\n\n        // convert birthDate string to TS\n        if (formData.details?.birthDate) {\n            formData.details.birthDate = getDateYMDFlexible(formData.details?.birthDate) as string;\n        }\n\n        if (animal) {\n            formData.id = animal.id;\n        }\n        const resultAction = await dispatch(createOrUpdateAnimal(formData));\n\n        if (createOrUpdateAnimal.fulfilled.match(resultAction)) {\n            submitCallback(null);\n        } else {\n            // returns error message after bad insert\n            submitCallback(resultAction.payload);\n        }\n    };\n\n    return (\n        <Box display=\"flex\" justifyContent=\"center\" sx={{ maxWidth: 800, margin: '0 auto' }}>\n            <FormProvider {...methods}>\n                <Box onSubmit={handleSubmit(onSubmit)} ref={formRef}>\n                    <DetailsStep />\n                </Box>\n            </FormProvider>\n        </Box>\n    );\n}\n\nconst getDefaultFormValues = (animal?: Animal): AnimalFormData => {\n    // adjust birthData format to form string input\n    return animal\n        ? { ...animal, details: { ...animal.details, birthDate: getYMDDateFromTS(animal.details?.birthDate) } }\n        : { details: { birthDate: getYMDDateFromTS(Date.now().toString()) } };\n};\n\nexport function FormRow({ children, ...props }: GridProps) {\n    return (\n        <Grid item xs={12} container spacing={2} {...props}>\n            {children}\n        </Grid>\n    );\n}\n\ninterface AnimalFormProps {\n    animal?: Animal;\n    submitCallback: (error: any) => void;\n}\n\nexport interface AnimalFormData extends Partial<Omit<Animal, 'details'>> {\n    id?: number;\n    details?: Partial<AnimalDetails>;\n}\n\n// todo createEvent prop.\n","import { loader } from 'graphql.macro';\nimport React from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { useQuery } from '@apollo/client';\nimport { Box, Grid, Skeleton, styled } from '@mui/material';\nimport AnimalForm from '../components/animal/create-update/AnimalForm';\nimport { Animal } from '../graphql/types';\nimport logo from '../logo.svg';\nimport Page from './Page';\n\nconst GET_ANIMAL_DETAILS_ON_EDIT = loader('../graphql/queries/animal-details-on-edit.graphql');\n\nfunction AnimalEditPage() {\n    const navigate = useNavigate();\n    const { id } = useParams();\n\n    const { loading, error, data } = useQuery<Response>(GET_ANIMAL_DETAILS_ON_EDIT, {\n        variables: { id: Number(id) },\n        skip: !id,\n    });\n\n    const submitCallback = (err: any) => {\n        if (err === null) {\n            navigate('/animal-list');\n        } else {\n            // todo - should also show error on UI\n            console.error('AnimalForm', err);\n        }\n    };\n\n    return (\n        <Page topSection={<TopSection />}>\n            {error ? (\n                <p>Error!</p>\n            ) : loading ? (\n                <Skeleton animation=\"wave\" variant=\"rectangular\" height=\"70vh\" width=\"100%\" />\n            ) : (\n                <AnimalForm animal={data?.animal} submitCallback={submitCallback} />\n            )}\n        </Page>\n    );\n}\n\nconst PREFIX = 'TopSection';\n\nconst classes = {\n    image: `${PREFIX}-image`,\n    imageWrapper: `${PREFIX}-imageWrapper`,\n};\n\nconst StyledGrid = styled(Grid)(({ theme }) => ({\n    [`& .${classes.image}`]: {\n        fill: theme.palette.primary.dark,\n        width: '100%',\n    },\n    [`& .${classes.imageWrapper}`]: {\n        padding: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        width: 64,\n        height: 64,\n        borderRadius: '50%',\n        backgroundColor: theme.palette.secondary.light,\n        [theme.breakpoints.up('md')]: {\n            padding: theme.spacing(2),\n            marginBottom: theme.spacing(2),\n            width: 100,\n            height: 100,\n        },\n    },\n}));\n\nfunction TopSection() {\n    return (\n        <StyledGrid container spacing={0} justifyContent=\"center\" alignItems=\"center\">\n            <Box className={classes.imageWrapper}>\n                <img src={logo} alt=\"paw\" className={classes.image} />\n            </Box>\n        </StyledGrid>\n    );\n}\n\nexport default AnimalEditPage;\n\ninterface Response {\n    animal: Animal;\n}\n"],"sourceRoot":""}